---
layout: post
title: linux shell编程--变量
description: linux shell编程--变量
category: 技术
---

## 变量引用
用set命令可以查看所有的变量  
unset var命令可以清除变量var，var相当于没有定义过  
readonly var可以把var变为只读变量，定义之后不能对var进行任何更改。  
对shell变量的引用方式很多，用这些方式可以方便的获取shell变量的值，变量值的长度，变量的一个字串，变量被部分替换后的值等等。shell变量常见引用方式如下：  
![](/images/2014-10-16-shell-variable/1.png)
![](/images/2014-10-16-shell-variable/2.png)
![](/images/2014-10-16-shell-variable/3.png)  

补充：  
从左边第几个字符开始，及字符的个数  
echo ${var:0:5}  
其中的 0 表示左边第一个字符开始，5 表示字符的总个数。  
结果是：http:

从左边第几个字符开始，一直到结束。  
echo ${var:7}  
其中的 7 表示左边第8个字符开始，一直到结束。  
结果是 ：www.linuxidc.com/test.htm  

从右边第几个字符开始，及字符的个数  
echo ${var:0-7:4}  
其中的 0-7 表示右边算起第七个字符开始，4 表示字符的个数。  
结果是：test

从右边第几个字符开始，一直到结束。  
echo ${var:0-7}  
表示从右边第七个字符开始，一直到结束。  
结果是：test.htm  

注：（左边的第一个字符是用 0 表示，右边的第一个字符用 0-1 表示）

## 数值变量
shell中默认把变量值当作字符串，例如：  

    age=22
    age=${age}+1
    echo ${age}

输出结果为22+1，而不是23，因为shell将其解释为字符串，而不是数学运算。  
可以用let命令使其进行数学运算，例如：`let age=${age}+1`

## 数组变量
数组的初始化：array=(1, 2, 3)   
可以通过 `${array[$i]}`来访问array中某个元素，`${array[*]`或`${array[@]}`的返回值即数组的所有元素组成的串，`${#array[*]}` 的返回值即数组的元素个数。

shell 提供了另外一种数组，其可以使用任意的字符串作为下标（不必是整数）来访问数组元素。这种数组叫做关联数组。在使用关联数组之前，需要使用命令 declare -A array 进行显示声明。

	${!array[*]}	 取关联数组所有键
	${!array[@]}	 取关联数组所有键
	${array[*]}	     取关联数组所有值
	${array[@]}	     取关联数组所有值
	${#array[*]}	 关联数组的长度
	${#array[@]}	 关联数组的长度

## 特殊变量

    $0：当前脚本的文件名
    $num：num为从1开始的数字，$1是第一个参数，$2是第二个参数，${10}是第十个参数
    $#：传入脚本的参数的个数
    $*：所有的位置参数(作为单个字符串)
    $@：所有的位置参数(每个都作为独立的字符串)。
    $?：当前shell进程中，上一个命令的返回值，如果上一个命令成功执行则$?的值为0，否则为其他非零值，常用做if语句条件
    $$：当前shell进程的pid
    $!：后台运行的最后一个进程的pid
    $-：显示shell使用的当前选项
    $_：之前命令的最后一个参数

更多的特殊shell变量、比较运算符参见：  
<http://blog.csdn.net/yangzhongxuan/article/details/7493108>